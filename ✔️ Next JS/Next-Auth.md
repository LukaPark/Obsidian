****

## 액세스 토큰을 저장할 때

1. 로컬 스토리지
	- 간편. 하지만 XSS(Cross Site Scripting attack, 악의적인 자바스크립트 코드를 실행) 공격에 취약
2. 쿠키
	- 쿠키에 http-only 와 Secure 설정을 하면, 자바스크립트로 쿠키에 접근 할 수 없기 때문에 XSS 공격에는 상대적으로 안전
	- 쿠키는 최대 4kb만 저장이 가능하기에 용량이 큰 토큰의 경우 저장이 불가능. 
	- CSRF(사용자의 의도와 무관하게 특정 HTTP 요청을 하게 만드는 공격 방법.)
	- 토큰은 HTTP 요청마다 RequestHeader 에 담겨 보내지기 때문에, 서버에서 쿠키에 담긴 토큰 정보를 이용해 사용자 권한을 검증한다면, CSRF 공격시 문제의 소지가 있음

#### NextAuth 는 ?

- 쿠키에 토큰을 저장 할  떄 Same-Site 속성이 기본적으로 Lax 로 지정한다.
- Same-site 속성: cross-site에 HTTP 요청을 보낼 경우 쿠키에 해당 정보를 담아 보낼 것인가의 여부.
- Lax: 상기에서 해당 정보를 담아 보내지 않는 옵션

- http-only 의 경우 자바스크립트로 토큰 정보에 접근할 수 없음. 이를 위해서 NextAuth 는 jwt, session 과 같은 콜백 함수 등을 이용해 client에서도 토큰 정보 일부를 노출 시킬 수 있고, useSession과 같은 훅을 통해 이를 참조 할 수 있음.

