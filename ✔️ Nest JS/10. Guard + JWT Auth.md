
![[Pasted image 20231124113031.png]]
- **인증 (authentication)** 은 **미들웨어**로 구현하는 것이 권장.
- 애플리케이션은 사용자의 권한을 확인하기 위해 **인증**과 **인가**를 수행.

- **인증** *authentication*: 요청자가 자신이 누구인지 증명하는 과정
- 매 요청은 **JWT 토큰**을 포함하고, 이 토큰을 통해 요청자의 접근 권한을 확인.

- **인가** *authorization* : **인증**을 통과 한 유저가 요청한 기능을 사용할 권한이 있는지 판별하는 과정.
- 퍼미션(permission), 롤(role), 접근 제어 목록(access control list, ACL) 같은 개념을 사용하여 유저가 가지고 있는 속성으로 리소스 사용을 허가할 지 판별. -> 인가는 **가드(Guard)**를 이용하여 구현하는 것을 권장.

- 인증 실패 -> 401 Unauthorized
- 인가 실패 -> 403 Forbidden

- 인증, 인가를 미들웨어로 구현하기 힘든 이유
	- 미들웨어는 실행 콘텍스트(Execution Context)에 접근하지 못함.
	- 단순히 본인의 일을 수행하고 next() 함수를 호출.
	- 다음에 어떤 핸들러가 수행되는지 알 수 없기 때문.
	- 가드는 실행 콘텍스트 인스턴스에 접근할 수 있어 다음 실행될 작업에 대해 알고 있음.


# JWT

- 클라이언트는 로그인 후 서버로부터 전달받은 **JWT**를 저장한 후 -> 리소스를 요청할 때 함께 전달.*헤더*
- 

